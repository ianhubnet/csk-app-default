name: Notify `ianhubnet/csk-projects`

# Option #1: Update on tag push.
# on:
#   push:
#     tags:
#       - '*' # Trigger on any tag
# Option #2: Update on push event to branch.
on:
  push:
    branches:
      - main
    paths-ignore:
      - '.dev/**'
      - '.gitdocs/**'
      - '.github/**'
      - '.gitignore'
      - '.gitattributes'
      - '.editorconfig'
      - 'CITATION.cff'
      - '*.todolist'

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
      - name: Notify csk-projects repo about project update
        uses: peter-evans/repository-dispatch@v3
        with:
          token: ${{ secrets.CSK_PAT }}
          repository: ianhubnet/csk-projects
          event-type: update-submodules
          client-payload: |
            {
              "repo": "${{ github.repository }}",
              "name": "${{ github.repository_name }}",
              "strip": "${{ vars.CSK_STRIP }}"
            }
